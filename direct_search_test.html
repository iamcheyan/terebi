<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>直接搜索测试</title>
</head>
<body>
    <h1>直接搜索测试</h1>
    <button onclick="testDirectSearch()">直接测试搜索チャリメラ</button>
    <div id="result"></div>

    <script>
        async function testDirectSearch() {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = '开始测试...';
            
            try {
                // 直接加载mezamashitvchannel.json文件
                console.log('开始加载数据文件...');
                const response = await fetch('data/mezamashitvchannel.json');
                console.log('响应状态:', response.status);
                
                if (!response.ok) {
                    throw new Error('文件加载失败: ' + response.status);
                }
                
                const data = await response.json();
                console.log('文件加载成功，视频数量:', data.videos?.length || 0);
                
                const videos = data.videos || [];
                const keyword = 'チャリメラ';
                
                console.log('搜索关键词:', keyword);
                console.log('总视频数:', videos.length);
                
                // 显示前10个视频标题
                console.log('前10个视频标题:');
                for (let i = 0; i < Math.min(10, videos.length); i++) {
                    console.log(`${i+1}. ${videos[i].title}`);
                }
                
                // 搜索匹配的视频
                const matches = videos.filter(v => {
                    if (!v.title) return false;
                    const title = v.title.toLowerCase();
                    const keywordLower = keyword.toLowerCase();
                    const match = title.includes(keywordLower);
                    if (match) {
                        console.log('找到匹配:', v.title);
                    }
                    return match;
                });
                
                console.log('找到匹配视频数量:', matches.length);
                
                if (matches.length > 0) {
                    resultDiv.innerHTML = `搜索成功！找到 ${matches.length} 个匹配结果:<br>` + 
                        matches.map(v => `- ${v.title} (ID: ${v.id})`).join('<br>');
                } else {
                    resultDiv.innerHTML = `搜索完成，但没有找到匹配的视频。<br>搜索关键词: "${keyword}"<br>总视频数: ${videos.length}`;
                }
                
            } catch (error) {
                console.error('测试失败:', error);
                resultDiv.textContent = '测试失败: ' + error.message;
            }
        }
    </script>
</body>
</html>
